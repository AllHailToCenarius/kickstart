=color($background)
  @if (lightness($background) < 75%)
    color: rgba(255, 255, 255, 0.5)
  @else
    color: rgba(0, 0, 0, 0.5)

=navbar-default($bleed-container: false, $background: map-get($white, dark), $breakpoint: $tablet, $collapse: false)
  background: $background
  box-shadow: 0px 1px 0px darken($background, 12%) inset
  font-size: $default-font-size

  nav
    width: 100%
    border-radius: 0
    position: relative

    @if (lightness($background) < 75%)
      color: white
    @else
      color: $default-font-color

    @media screen and (min-width: $breakpoint)
      display: flex
      align-items: flex-start
      flex-wrap: wrap
      justify-content: space-between
      align-content: space-between


    &.expand
      @if $collapse == true
        > ul > li
          display: block

    h1
      margin-bottom: 0
      font-size: $base-font-size
      line-height: $default-line-height

    p
      margin: 0

    @media screen and (min-width: $breakpoint)
      @if ($bleed-container)
        > ul:first-child
          margin-left: (-1 * map-get($rootElement, paddingH))

        > ul:last-child
          margin-right: (-1 * map-get($rootElement, paddingH))

    > ul
      margin: 0
      padding: 0

      @media screen and (min-width: $breakpoint)
        display: flex
        justify-content: space-between
        align-content: space-between
        align-items: center
        flex-wrap: wrap

      &:last-child
        @media screen and (min-width: $breakpoint)
          > li.with-submenu.open
            ul
              left: auto
              right: -1px

      > li
        list-style: none
        +root-element
        margin-bottom: 0
        border-radius: 0
        padding:
          top: (map-get($rootElement, paddingV) - 1)
          bottom: (map-get($rootElement, paddingV) - 1)
          left: map-get($rootElement, paddingH)
          right: map-get($rootElement, paddingH)
        position: relative

        @if $collapse == true
          display: none

          @media screen and (min-width: $breakpoint)
            display: block

        &.navbar-title
          display: flex
          justify-content: space-between
          align-items: center

          button
            +button(transparent)
            border-color: transparent
            color: inherit
            display: block
            margin-bottom: 0
            font-family: Kickstart, 'Kickstart'

            @media screen and (min-width: $breakpoint)
              display: none

        &.with-submenu // Added via k$.nav()
          padding: (2 * map-get($rootElement, paddingV) - 1) (map-get($rootElement, paddingH))
          +color($background)
          cursor: pointer

          &:after
            content: '+'
            font-family: 'Kickstart', Kickstart
            display: inline-block
            margin-left: 8px
            font-size: 0.65rem
            vertical-align: middle

          &:hover
            @if (lightness($background) < 75%)
              color: white
            @else
              color: rgba(0, 0, 0, 0.85)
            background: darken($background, 5%)
            border-color: darken($background, 5%)

          &:active
            background: darken($background, 15%)
            border-color: darken($background, 15%)

          &.open
            color: rgba(0, 0, 0, 0.85)
            background: white
            border-color: map-get($white, darker)
            border-bottom-color: transparent

            &:hover
              color: rgba(0, 0, 0, 0.85)
              border-color: map-get($white, darker)
              border-bottom-color: transparent

        ul
          border-top-left-radius: 0
          border-top-right-radius: 0
          box-shadow: 3px 3px 3px -3px rgba(0, 0, 0, 0.25)
          display: none

        > a:not([role=button])
          +color($background)
          text-decoration: none
          cursor: pointer
          display: block
          +root-element
          margin-bottom: 0
          border-radius: 0
          margin: (-1 * map-get($rootElement, paddingV)) (-1 * map-get($rootElement, paddingH))
          padding:
            top: (2 * map-get($rootElement, paddingV))
            bottom: (2 * map-get($rootElement, paddingV))
            left: map-get($rootElement, paddingH)
            right: map-get($rootElement, paddingH)

          &:hover
            @if (lightness($background) < 75%)
              color: white
            @else
              color: rgba(0, 0, 0, 0.85)
            background: darken($background, 5%)
            border-color: darken($background, 5%)

          &:active
            background: darken($background, 15%)
            border-color: darken($background, 15%)
